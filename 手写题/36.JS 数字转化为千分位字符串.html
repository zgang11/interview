<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS 数字转化为千分位字符串</title>
  </head>
  <body>
    <!-- <script>
      // 字符串操作
      function format(num) {
        let [int, fraction = ""] = (num + "").split(".");
        let ans = "";
        const len = int.length;
        int = int.split("").reverse();
        for (let i = 0; i < len; i++) {
          if (i !== 0 && i % 3 === 0) {
            ans = int[i] + "," + ans;
          } else {
            ans = int[i] + ans;
          }
        }

        if (fraction !== "") ans += "." + fraction;

        return ans;
      }
    </script> -->

    <!-- <script>
      // 数学运算
      function format(num) {
        let n = num;
        let tmp = 0;
        let ans = "";
        do {
          mod = n % 1000;
          n /= 1000;
          tmp = ~~mod;
          ans = (n >= 1 ? `${tmp}`.padStart(3, "0") : tmp) + (ans === "" ? "" : "," + ans);
          console.log(mod, n, tmp, ans)
        } while (n >= 1);

        const start = num + "";
        const idx = start.indexOf(".");
        if (idx > -1) ans += start.substring(idx);

        return ans;
      }
      console.log(format(12345.3234))
    </script> -->

    <script>
      // 正则匹配
      function format(num) {
        const reg = /\d{1,3}(?=(\d{3})+$)/g;
        const [int, frac] = String(num).split('.');
        '32432432432'.replaceAll(/\d{1, 3}(?=(\d{3})+$)/g, '$1,')
        return int.replaceAll(reg, '$1,') + '.' + frac;
      }
      console.log(format(123456.32332))
    </script>
    
    <script>
      // Number.toLocaleString();
      let a = -1234567.8;
      a.toLocaleString('en-us');
    </script>
  </body>
</html>
