<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Array.prototype.flat</title>
</head>
<body>
  <script>
    // const flat_1 = (arr, depth) => {
    //     return depth > 0 ? arr.reduce((acc, cur) => {
    //        if(Array.isArray(cur)){
    //         return [...acc, ...flat_1(cur, depth - 1)]
    //        }
    //        return [...acc, cur]
    //     }, []) : arr
    // }

    // 递归
    // const flat_1 = (arr, depth) => {
    //   return depth > 0 ? arr.reduce((acc, cur) => {
    //     return Array.isArray(cur) ? [...acc, ...flat_1(cur, depth - 1)] : [...acc, cur]
    //   }, []) : arr
    // }


    // const flat_2 = (arr, depth) => {
    //   let result = []
    //   if(depth <= 0) return arr
    //   arr.forEach(element => {
    //     if(Array.isArray(element)){
    //       result = result.concat(flat_2(element, depth - 1))
    //     }else{
    //       result.push(element)
    //     }
    //   }); 
    //   return result
    // }

    let arr = [3, 6, 7, [3, 5, 6, [3, 0],
      [2, 3, 40]
    ]]
    const flat_ = function(arr, depth) {
      return depth > 0 ? arr.reduce((acc, cur) => {
         return Array.isArray(cur) ? [...acc, ...flat_(cur, depth - 1)] : [...acc, cur] 
      }, []) : arr
    }

    const flat_2 = function(arr, depth) {
      if(depth === 0) return arr
      let result = []
      arr.forEach(element => {
        if(Array.isArray(element)) {
          result = result.concat(flat_2(element, depth - 1))
        } else {
          result.push(element)
        }
      });
      return result
    }

    console.log(flat_(arr, 1))
    console.log(flat_2(arr, 1))
  </script>
</body>
</html>