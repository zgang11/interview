<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      const data = [
        {
          id: "1",
          name: "父节点1",
          children: [
            {
              id: "1-1",
              name: "子节点1-1",
              children: [
                {
                  id: "1-1-1",
                  name: "子节点1-1-1",
                },
                {
                  id: "1-1-2",
                  name: "子节点1-1-2",
                },
              ],
            },
          ],
        },
        {
          id: "2",
          name: "父节点2",
          children: [
            {
              id: "2-1",
              name: "子节点2-1",
            },
          ],
        },
      ];

      let result = data.reduce(function(acc, cur) {
        acc.push({
          id: cur.id,
          name: cur.name,
          parentId: cur.parentId,
        })
        if(cur.children) {
          cur.children.forEach(each => {
            each.parentId = cur.id
            arguments.callee(acc, each)
          })
        }
        return acc
      }, [])
      console.log(result)


      let res = []
      var dfs = (tree, pid) => {
        for(let item of tree) {
          res.push({
            id: item.id,
            name: item.name,
            pid
          })
          if(item.children) dfs(item.children, item.id)
        }
      }
      dfs(data, undefined)
      console.log(res)

      // const result = data.reduce(function (acc, cur) {
      //   acc.push({
      //     id: cur.id,
      //     name: cur.name,
      //     parentId: cur.parentId
      //   });
      //   cur.children && cur.children.forEach(child => {
      //     child.parentId = cur.id;
      //     arguments.callee(acc, child);
      //   })
      //   return acc;
      // }, []);




      // let ans = [];
      // var dfs = (tree, pid) => {
      //   for (let item of tree) {
      //     ans.push({ ...item, pid });
      //     if (item.children) {
      //       dfs(item.children, item.id);
      //     }
      //   }
      // };
      // dfs(data, undefined);
    </script>
  </body>
</html>
