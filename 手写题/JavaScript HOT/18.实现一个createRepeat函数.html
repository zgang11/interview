<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>实现一个createRepeat函数</title>
  </head>
  <body>
    <script>
      function createRepeat(fn, repeat, interval) {
        // 保存定时器ID，用于在需要时清除
        let timerId = null;

        // 返回一个新函数，接收传递给原函数的参数
        return function (...args) {
          // 如果已有定时器在运行，先清除它
          if (timerId) {
            clearInterval(timerId);
          }

          let count = 0; // 计数器，记录已执行次数

          // 创建新的定时器
          timerId = setInterval(() => {
            // 执行原函数，并传递参数
            fn.apply(this, args);
            count++;

            // 当执行次数达到指定次数时，清除定时器
            if (count >= repeat) {
              clearInterval(timerId);
              timerId = null;
            }
          }, interval);
        };
      }

      // 示例用法
      const fn = createRepeat(console.log, 3, 4000);
      fn("helloWorld"); // 每4秒输出一次helloWorld，共输出3次
    </script>
  </body>
</html>
